<?xml version="1.0" encoding="UTF-8"?>
<ad:BasicModel
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ad="www.example.org/activityDiagram"
    xsi:schemaLocation="www.example.org/activityDiagram ActivityDiagram.ecore"
    name="gameThread"
    startActivity="//@activities.0">
  <activities
      xsi:type="ad:SimpleActivity"
      name="initialize"
      instance="//@instances.0"
      nextActivity="//@activities.1"
      activityName="initialize"
      sharedResources="//@resources.0"/>
  <activities
      xsi:type="ad:Fork"
      name="fork1"
      instance="//@instances.0">
    <forkedThreads
        name="renderThread"
        startActivity="//@activities.1/@forkedThreads.0/@activities.0">
      <activities
          xsi:type="ad:SimpleActivity"
          name="gameRendering"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.0/@activities.1"
          activityName="render"
          sharedResources="//@resources.0"/>
      <activities
          xsi:type="ad:SimpleActivity"
          name="unitRendering"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.0/@activities.2"
          activityName="render"/>
      <activities
          xsi:type="ad:Yield"
          name="yield1"
          instance="//@instances.0"
          nextActivity="//@activities.1/@forkedThreads.0/@activities.0"/>
    </forkedThreads>
    <forkedThreads
        name="unitThread"
        startActivity="//@activities.1/@forkedThreads.1/@activities.0">
      <activities
          xsi:type="ad:SimpleActivity"
          name="chooseNearbyEnemy"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.1"
          activityName="chooseNearbyEnemy"
          sharedResources="//@resources.0"/>
      <activities
          xsi:type="ad:Decision"
          name="foundTargetUnit"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.2">
        <branches
            nextActivity="//@activities.1/@forkedThreads.1/@activities.3"
            condition="[targetUnit &lt;> null]"/>
      </activities>
      <activities
          xsi:type="ad:Yield"
          name="yield2"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.0"/>
      <activities
          xsi:type="ad:SimpleActivity"
          name="rollDamage"
          instance="//@instances.1"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.4"
          activityName="rollDamage"/>
      <activities
          xsi:type="ad:SimpleActivity"
          name="receiveDamage"
          instance="//@instances.2"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.5"
          activityName="receiveDamage"/>
      <activities
          xsi:type="ad:Decision"
          name="isUnitKilled"
          instance="//@instances.2"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.2">
        <branches
            nextActivity="//@activities.1/@forkedThreads.1/@activities.6"
            condition="[health &lt;= 0]"/>
      </activities>
      <activities
          xsi:type="ad:SimpleActivity"
          name="removeFromUnitList"
          instance="//@instances.2"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.7"
          activityName="removeFromUnitList"
          sharedResources="//@resources.0"/>
      <activities
          xsi:type="ad:End"
          name="end1"
          instance="//@instances.2"/>
    </forkedThreads>
  </activities>
  <resources
      name="unitList"/>
  <instances
      name="game"
      instanceType="//@instanceTypes.0"/>
  <instances
      name="unit"
      instanceType="//@instanceTypes.1"/>
  <instances
      name="targetUnit"
      instanceType="//@instanceTypes.1"/>
  <instanceTypes
      name="Game"/>
  <instanceTypes
      name="Unit"/>
</ad:BasicModel>
