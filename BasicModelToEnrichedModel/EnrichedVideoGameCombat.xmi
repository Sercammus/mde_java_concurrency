<?xml version="1.0" encoding="ISO-8859-1"?>
<em:EnrichedModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:em="enrichedModel">
  <instanceTypes name="Game">
    <methods name="initialize(simple method)"/>
    <methods name="render(simple method)"/>
    <methods name="unitThread(forked method)">
      <states xsi:type="em:MethodCallState" calledMethod="//@instanceTypes.1/@methods.1" targetInstance="//@methodParameters.1">
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.1"/>
      </states>
      <states id="1">
        <jumps condition="[targetUnit &lt;> null]" nextState="//@instanceTypes.0/@methods.2/@states.3"/>
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.2"/>
      </states>
      <states xsi:type="em:YieldState" id="5">
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.0"/>
      </states>
      <states xsi:type="em:MethodCallState" id="2" calledMethod="//@instanceTypes.1/@methods.2" targetInstance="//@methodParameters.1">
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.4"/>
      </states>
      <states xsi:type="em:MethodCallState" id="3" calledMethod="//@instanceTypes.1/@methods.3" targetInstance="//@methodParameters.2">
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.5"/>
      </states>
      <states id="4">
        <jumps condition="[health &lt;= 0]" nextState="//@instanceTypes.0/@methods.2/@states.6"/>
        <jumps nextState="//@instanceTypes.0/@methods.2/@states.2"/>
      </states>
      <states xsi:type="em:MethodCallState" id="5" calledMethod="//@instanceTypes.1/@methods.4" targetInstance="//@methodParameters.2"/>
    </methods>
    <methods name="renderThread(forked method)">
      <states xsi:type="em:MethodCallState" calledMethod="//@instanceTypes.0/@methods.1" targetInstance="//@methodParameters.0">
        <jumps nextState="//@instanceTypes.0/@methods.3/@states.1"/>
      </states>
      <states xsi:type="em:MethodCallState" id="1" calledMethod="//@instanceTypes.1/@methods.0" targetInstance="//@methodParameters.1">
        <jumps nextState="//@instanceTypes.0/@methods.3/@states.2"/>
      </states>
      <states xsi:type="em:YieldState" id="2">
        <jumps nextState="//@instanceTypes.0/@methods.3/@states.0"/>
      </states>
    </methods>
  </instanceTypes>
  <instanceTypes name="Unit">
    <methods name="render(simple method)"/>
    <methods name="chooseNearbyEnemy(simple method)"/>
    <methods name="rollDamage(simple method)"/>
    <methods name="receiveDamage(simple method)"/>
    <methods name="removeFromUnitList(simple method)"/>
  </instanceTypes>
  <instanceTypes name="Main">
    <methods name="main">
      <states xsi:type="em:MethodCallState" calledMethod="//@instanceTypes.0/@methods.0" targetInstance="//@methodParameters.0">
        <jumps nextState="//@instanceTypes.2/@methods.0/@states.1"/>
      </states>
      <states xsi:type="em:ForkState" id="1">
        <threadInits calledMethod="//@instanceTypes.0/@methods.3"/>
        <threadInits calledMethod="//@instanceTypes.0/@methods.2"/>
      </states>
    </methods>
  </instanceTypes>
  <methodParameters xsi:type="em:Instance" name="game" instanceType="//@instanceTypes.0"/>
  <methodParameters xsi:type="em:Instance" name="unit" instanceType="//@instanceTypes.1"/>
  <methodParameters xsi:type="em:Instance" name="targetUnit" instanceType="//@instanceTypes.1"/>
  <methodParameters xsi:type="em:Thread" name="gameThread"/>
  <methodParameters xsi:type="em:Thread" name="renderThread"/>
  <methodParameters xsi:type="em:Thread" name="unitThread"/>
  <methodParameters xsi:type="em:SharedResource" name="unitList"/>
</em:EnrichedModel>
