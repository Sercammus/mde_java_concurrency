<?xml version="1.0" encoding="UTF-8"?>
<ad:BasicModel
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ad="www.example.org/basicModel"
    xsi:schemaLocation="www.example.org/basicModel ../metamodels/BasicModel.ecore"
    name="mergeSort"
    startActivity="//@activities.0">
  <activities
      xsi:type="ad:NestedActivity"
      name="doMergeSort1"
      nextActivity="//@activities.1"
      nestedThread="//@nestedThreads.0"/>
  <activities
      xsi:type="ad:End"
      name="end1"/>
  <nestedThreads
      name="mergeSortThread"
      startActivity="//@nestedThreads.0/@activities.0"
      activityName="doMergeSort">
    <activities
        xsi:type="ad:SimpleActivity"
        name="split"
        nextActivity="//@nestedThreads.0/@activities.1"
        activityName="split"/>
    <activities
        xsi:type="ad:Fork"
        name="fork1"
        maxThreadCount="0">
      <forkedThreads
          name="sortFirstHalfThread"
          startActivity="//@nestedThreads.0/@activities.1/@forkedThreads.0/@activities.0">
        <activities
            xsi:type="ad:NestedActivity"
            name="doMergeSort2"
            nextActivity="//@nestedThreads.0/@activities.1/@forkedThreads.1/@activities.1"
            nestedThread="//@nestedThreads.0"/>
      </forkedThreads>
      <forkedThreads
          name="sortSecondHalfThread"
          startActivity="//@nestedThreads.0/@activities.1/@forkedThreads.1/@activities.0">
        <activities
            xsi:type="ad:NestedActivity"
            name="doMergeSort3"
            nextActivity="//@nestedThreads.0/@activities.1/@forkedThreads.1/@activities.1"
            nestedThread="//@nestedThreads.0"/>
        <activities
            xsi:type="ad:Join"
            name="join1"
            nextActivity="//@nestedThreads.0/@activities.2"/>
      </forkedThreads>
    </activities>
    <activities
        xsi:type="ad:SimpleActivity"
        name="merge"
        nextActivity="//@nestedThreads.0/@activities.3"
        activityName="merge"/>
    <activities
        xsi:type="ad:End"
        name="end2"/>
  </nestedThreads>
</ad:BasicModel>
