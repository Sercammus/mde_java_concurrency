<?xml version="1.0" encoding="UTF-8"?>
<ad:BasicModel
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ad="www.example.org/basicModel"
    xsi:schemaLocation="www.example.org/basicModel ../metamodels/BasicModel.ecore"
    name="mergeSort"
    startActivity="//@activities.0">
  <activities
      xsi:type="ad:Fork"
      name="fork2"
      maxThreadCount="0">
    <forkedThreads
        name="mergeSortThread"
        startActivity="//@activities.0/@forkedThreads.0/@activities.0">
      <activities
          xsi:type="ad:NestedActivity"
          name="doMergeSort1"
          nextActivity="//@activities.0/@forkedThreads.0/@activities.1"
          nestedThread="//@nestedThreads.0"/>
      <activities
          xsi:type="ad:SimpleActivity"
          name="printResult"
          nextActivity="//@nestedThreads.0/@activities.4"
          activityName="printResult"/>
      <activities
          xsi:type="ad:End"
          name="end1"/>
    </forkedThreads>
    <forkedThreads
        name="timeoutThread"
        startActivity="//@activities.0/@forkedThreads.1/@activities.0">
      <activities
          xsi:type="ad:Sleep"
          name="sleep"
          nextActivity="//@activities.0/@forkedThreads.1/@activities.1"
          duration="5000"/>
      <activities
          xsi:type="ad:Interrupt"
          name="interrupt"
          nextActivity="//@activities.0/@forkedThreads.1/@activities.2"
          interruptedThread="//@activities.0/@forkedThreads.0"/>
      <activities
          xsi:type="ad:End"
          name="end2"/>
    </forkedThreads>
  </activities>
  <resources
      name="list"/>
  <resources
      name="firstHalf"/>
  <resources
      name="secondHalf"/>
  <nestedThreads
      name="subProcessThread"
      startActivity="//@nestedThreads.0/@activities.1"
      activityName="doMergeSort">
    <activities
        xsi:type="ad:Decision"
        name="decision"
        nextActivity="//@nestedThreads.0/@activities.4">
      <branches
          nextActivity="//@nestedThreads.0/@activities.1"
          condition="[size() > 1]"/>
    </activities>
    <activities
        xsi:type="ad:SimpleActivity"
        name="split"
        nextActivity="//@nestedThreads.0/@activities.2"
        activityName="split"
        sharedResources="//@resources.0 //@resources.1 //@resources.2"/>
    <activities
        xsi:type="ad:Fork"
        name="fork1"
        maxThreadCount="0">
      <forkedThreads
          name="sortFirstHalfThread"
          startActivity="//@nestedThreads.0/@activities.2/@forkedThreads.0/@activities.0">
        <activities
            xsi:type="ad:NestedActivity"
            name="doMergeSort2"
            nextActivity="//@nestedThreads.0/@activities.2/@forkedThreads.1/@activities.1"
            nestedThread="//@nestedThreads.0"/>
      </forkedThreads>
      <forkedThreads
          name="sortSecondHalfThread"
          startActivity="//@nestedThreads.0/@activities.2/@forkedThreads.1/@activities.0">
        <activities
            xsi:type="ad:NestedActivity"
            name="doMergeSort3"
            nextActivity="//@nestedThreads.0/@activities.2/@forkedThreads.1/@activities.1"
            nestedThread="//@nestedThreads.0"/>
        <activities
            xsi:type="ad:Join"
            name="join1"
            nextActivity="//@nestedThreads.0/@activities.3"/>
      </forkedThreads>
    </activities>
    <activities
        xsi:type="ad:SimpleActivity"
        name="merge"
        nextActivity="//@nestedThreads.0/@activities.4"
        activityName="merge"
        sharedResources="//@resources.0 //@resources.1 //@resources.2"/>
    <activities
        xsi:type="ad:End"
        name="end2"/>
  </nestedThreads>
</ad:BasicModel>
