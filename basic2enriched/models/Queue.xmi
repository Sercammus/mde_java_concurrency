<?xml version="1.0" encoding="UTF-8"?>
<ad:BasicModel
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ad="www.example.org/basicModel"
    xsi:schemaLocation="www.example.org/basicModel ../metamodels/BasicModel.ecore"
    name="queueExample"
    startActivity="//@activities.0">
  <activities
      xsi:type="ad:SimpleActivity"
      name="doSetup"
      nextActivity="//@activities.1"
      activityName="doSetup"/>
  <activities
      xsi:type="ad:Fork"
      name="fork">
    <forkedThreads
        name="inputThread"
        startActivity="//@activities.1/@forkedThreads.0/@activities.0">
      <activities
          xsi:type="ad:SimpleActivity"
          name="readInput"
          nextActivity="//@activities.1/@forkedThreads.0/@activities.1"
          activityName="readInput"/>
      <activities
          xsi:type="ad:SimpleActivity"
          name="enqueue"
          nextActivity="//@activities.1/@forkedThreads.0/@activities.0"
          activityName="enqueue"
          sharedResources="//@resources.0"/>
    </forkedThreads>
    <forkedThreads
        name="outputThread"
        startActivity="//@activities.1/@forkedThreads.1/@activities.0">
      <activities
          xsi:type="ad:SimpleActivity"
          name="dequeue"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.2"
          activityName="dequeue"/>
      <activities
          xsi:type="ad:Decision"
          name="decision"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.3">
        <branches
            nextActivity="//@activities.1/@forkedThreads.1/@activities.2"
            condition="[output]"/>
      </activities>
      <activities
          xsi:type="ad:SimpleActivity"
          name="writeOutput"
          nextActivity="//@activities.1/@forkedThreads.1/@activities.0"
          activityName="writeOutput"/>
      <activities
          xsi:type="ad:Sleep"
          name="sleep"
          duration="1"/>
    </forkedThreads>
  </activities>
  <resources
      name="queue"/>
</ad:BasicModel>
